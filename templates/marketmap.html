{% extends "base.html" %}
{% block title %}Market on Map{% endblock %}
{% block sidebar %}
<div class=" flex flex-col flex-grow w-full h-full p-2">
    <h1 class="text-xl font-bold text-white mb-4">Selected Markets</h1> 
    {% if grouped_selection_mkt %}
    <!-- <div class="text-white p-2"> -->
    <div class="text-white p-2 overflow-y-auto max-h-64 sm:max-h-80 md:max-h-96 pr-4">
        <!-- <h1 class="text-xl font-bold text-white mb-4">Selected Markets</h1> -->            
        {% for state, cities in grouped_selection_mkt.items() %}
        <div class="mb-4">
            <h2 class="text-lg font-semibold">{{ state }}</h2>
            <div class="overflow-y-auto max-h-40 pl-4">
                {% for city, data in cities.items() %}
                <div class="ml-4">
                    <p class="font-medium" {% if data.selected %} Selected {% endif %}>{{ city }}</p>
                    {% if data.pincodes %}
                    <ul class="list-disc text-sm overflow-y-auto max-h-40 pl-4">
                    {% for pin in data.pincodes %}
                        <li>{{ pin }}</li>
                    {% endfor %}
                    </ul>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
        {% endfor %}        
    </div>
    {% else %}
        <p>Pan India.</p>
    {% endif %}



</div>
{% endblock %}

{% block content %}
<div class=" flex1 flex-grow w-full h-full p-2">    
     <!-- <h2 class="text-xl font-bold  mb-4">Markets on Map</h2>     -->
    {% if selected_features %} 
        
        <iframe src="/static/map.html" class="w-full h-full border border-gray-300 rounded pt-4"></iframe>
            
   
    {% else %}
        <p>No features selected.</p>        
    {% endif %}
</div> 
{% endblock %}